#### 1. 查看本地镜像：`docker images` 或 `docker image ls`

这是最基础也最重要的命令，用于查看本地所有已下载的镜像。

- **完整命令**: `docker images`
    
- **常用选项**:
    
    - `-a`, `--all`: 显示所有镜像（包括中间层镜像）。
        
    - `-q`, `--quiet`: 只显示镜像 ID，常用于脚本中。
        
    - `--filter`: 根据条件过滤镜像。例如：`docker images --filter "dangling=true"` 可以列出所有悬空（dangling）镜像。
        

**作用**: 帮助你快速了解本地存储了哪些镜像、它们的标签、大小和创建时间。这是进行后续操作（如删除、清理）的第一步。

#### 2. 查找和拉取镜像：`docker search` 和 `docker pull`

- **`docker search`**
    
    - **命令**: `docker search <镜像名>`
        
    - **作用**: 在 Docker Hub 上搜索你需要的镜像。它会列出匹配的镜像，并显示它们的星级、官方状态和描述。
        
- **`docker pull`**
    
    - **命令**: `docker pull <镜像名>[:<标签>]`
        
    - **示例**: `docker pull nginx` (拉取 `nginx:latest` 镜像) 或 `docker pull ubuntu:18.04` (拉取指定版本的 Ubuntu 镜像)。
        
    - **作用**: 从远程镜像仓库（默认为 Docker Hub）下载镜像到本地。如果未指定标签，Docker 默认会拉取 `latest` 标签的镜像。
        

#### 3. 构建镜像：`docker build`

这是创建自定义镜像的核心命令，通过 `Dockerfile` 文件来构建。

- **命令**: `docker build [选项] <路径>`
    
- **常用选项**:
    
    - `-t`, `--tag`: 给构建的镜像命名和打标签。例如：`docker build -t myapp:v1.0 .`。
        
    - `-f`, `--file`: 指定 `Dockerfile` 的路径。
        
- **作用**: 读取 `Dockerfile` 中的指令，层层构建出新的镜像。`.` 代表 `Dockerfile` 所在的当前目录，这个目录中的所有文件都将作为构建上下文（context）被发送到 Docker 守护进程。
    

#### 4. 打标签：`docker tag`

用于为一个镜像添加、修改或删除标签。

- **命令**: `docker tag <源镜像>[:<标签>] <目标镜像>[:<标签>]`
    
- **示例**: `docker tag myapp:v1.0 my-private-registry.com/myapp:v1.0`
    
- **作用**: 当你需要将镜像推送到私有仓库或为不同版本做标记时，这个命令非常有用。它并不会创建新的镜像，只是为已存在的镜像添加一个新的引用名。
    

#### 5. 推送镜像：`docker push`

将本地镜像上传到远程仓库。

- **命令**: `docker push <镜像名>[:<标签>]`
    
- **示例**: `docker push my-private-registry.com/myapp:v1.0`
    
- **作用**: 将本地构建或标记的镜像分享给其他人，或者备份到远程仓库。通常需要先登录到远程仓库（`docker login`）。
    

#### 6. 删除镜像：`docker rmi` 或 `docker image rm`

用于删除本地的一个或多个镜像。

- **命令**: `docker rmi <镜像ID> 或 <镜像名>[:<标签>]`
    
- **示例**: `docker rmi 1a2b3c4d5e6f` (通过 ID 删除) 或 `docker rmi myapp:v1.0` (通过名称和标签删除)。
    
- **重要提示**: 如果一个镜像正在被某个容器使用，你将无法直接删除它。你需要先删除使用它的容器。
    

#### 7. 清理镜像：`docker image prune`

这个命令是运维中的利器，用于批量清理无用的镜像，以节省磁盘空间。

- **命令**: `docker image prune [选项]`
    
- **常用选项**:
    
    - `-a`, `--all`: 删除所有**未被任何容器使用**的镜像。这包括悬空镜像（dangling）和未引用的镜像。
        
    - `--filter`: 可以根据条件过滤。
        
- **作用**:
    
    - 不加任何选项时，`docker image prune` 只会删除**悬空镜像**（没有标签，并且没有被任何容器引用的镜像）。
        
    - 加上 `-a` 选项时，它会删除所有**未被任何容器引用**的镜像。
        

这是一个非常安全的清理命令，因为它不会删除任何正在被容器使用的镜像。

#### 8. 导出和导入镜像

``` Bash
#导出单个镜像
docker save -o my-app-v1.0.tar my-app:v1.0

#导出多个镜像
docker save -o all-my-images.tar my-app:v1.0 nginx:latest redis:alpine

#导入镜像（会自动从压缩包中识别并加载所有镜像及其标签，不需要在命令中再次指定镜像名）
docker load -i my-app-v1.0.tar
```

---

#### 10. 导出和导入容器

- docker export 导出的这个文件是一个**精简版**的镜像，不包含历史记录和元数据

``` Bash
#导出容器
docker export my-app_id > my-app-v1.0.tar

#导入容器
docker import my-app-v1.0.tar
```
